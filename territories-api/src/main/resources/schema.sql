create alias if not exists uuid_generate_v1 for "org.h2.value.ValueUuid.getNewRandom";

drop table if exists continent cascade;
create table continent (id bigint generated by default as identity, iso_code2 varchar(255), primary key (id));
drop table if exists country cascade;
create table country (id uuid default uuid_generate_v1() not null, latitude double check (latitude<=90 AND latitude>=-90), longitude double check (longitude>=-180 AND longitude<=180), iso_code2 varchar(2) not null, iso_code3 varchar(3), iso_numeric varchar(5), internet_cctld varchar(5), phone_prefix smallint, continent_id bigint, primary key (id));
drop table if exists country_political_division_list cascade;
create table country_political_division_list (country_list_id uuid default uuid_generate_v1() not null, political_division_list_id bigint not null);
drop table if exists landmark cascade;
create table landmark (id bigint generated by default as identity, latitude double check (latitude<=90 AND latitude>=-90), longitude double check (longitude>=-180 AND longitude<=180), name varchar(255), street_address varchar(255), locality_id uuid default uuid_generate_v1(), primary key (id));
drop table if exists locality cascade;
create table locality (id uuid default uuid_generate_v1() not null, latitude double check (latitude<=90 AND latitude>=-90), longitude double check (longitude>=-180 AND longitude<=180), iso_code2 varchar(2) not null, iso_code3 varchar(3), iso_numeric varchar(5), division_level smallint, local_code varchar(255), name varchar(255), country_id uuid default uuid_generate_v1() not null, parent_locality_id uuid default uuid_generate_v1() not null, primary key (id));
drop table if exists political_division cascade;
create table political_division (id bigint generated by default as identity, division_level smallint, name varchar(255), primary key (id));
alter table country add constraint UK_55hucmu5uv84s4mwx4780d6bq unique (iso_code2);
alter table country add constraint UK_36dgtb7tjioi4cj35g20b36x9 unique (iso_code3);
alter table country add constraint UK_bdebt358g213lt2in79fypt9w unique (iso_numeric);
alter table locality add constraint UK_94jc2hn57694mp4tq32hnm7kc unique (iso_code2);
alter table locality add constraint UK_81jixb3wni5br8daap8a05xxn unique (iso_code3);
alter table locality add constraint UK_sfndt886iow0q36em0tdonlud unique (iso_numeric);
alter table country add constraint FKpymfsgrl32dy3gtl9r7rykkjg foreign key (continent_id) references continent;
alter table country_political_division_list add constraint FKpnafyqk11m8yg1avob6yow1ih foreign key (political_division_list_id) references political_division;
alter table country_political_division_list add constraint FKrgqoi035y764u40hd7ptfvjk3 foreign key (country_list_id) references country;
alter table landmark add constraint FKfm7166jbj9p32rj864xe4rm1u foreign key (locality_id) references locality;
alter table locality add constraint FK6b1x8a26j9w11je3qb0qy0apo foreign key (country_id) references country;
alter table locality add constraint FKlxir51tpt6a1gstyvybskdhx4 foreign key (parent_locality_id) references locality;
